Vagrant.configure("2") do |config|
	config.vm.box = "inclusivedesign/windows10-eval"
	config.vm.boot_timeout = 1000
	config.vm.provider "virtualbox"
	config.vm.synced_folder ".", "/vagrant", type: "virtualbox"
	config.winrm.port = 5985

	config.vm.provider "virtualbox" do |v|
		v.gui = true
		v.name = "win10_vbox_test"
		v.customize ["modifyvm", :id, "--vrde", "off"]
		v.customize ["modifyvm", :id, "--graphicscontroller", "vboxvga"]
		v.customize ["modifyvm", :id, "--vram", "128"]
		v.customize ["modifyvm", :id, "--hwvirtex", "on"]
		v.customize ["modifyvm", :id, "--accelerate2dvideo", "on"]
		# Enable usb
		v.customize ["modifyvm", :id, "--usb", "off"]
		v.customize ["modifyvm", :id, "--usbxhci", "off"]
		v.memory = 4096
		v.cpus = 2
#		v.customize ["setextradata", :id, "VBoxInternal/TM/TSCModeSwitchAllowed", 0]
#		v.customize ["setextradata", :id, "VBoxInternal/TM/TSCMode", "VirtTSCEmulated"]
		v.customize ["setextradata", :id, "VBoxInternal/TM/TSCMode", "RealTSCOffset"]
		v.customize ["setextradata", :id, "VBoxInternal/CPUM/SSE4.1", 1]
		v.customize ["setextradata", :id, "VBoxInternal/CPUM/SSE4.2", 1]
	end
end
